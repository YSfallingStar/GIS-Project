{"mappings":"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","sources":["src/main.js"],"sourcesContent":["\r\n// TMS 불러오기\r\nlet imagery = new ol.layer.Tile({\r\n  crossOrigin:'anonymous',\r\n  source: new ol.source.XYZ({\r\n    url: 'https://d2map.com:7443/TARTMS/World_TMS/{z}/{x}/{-y}.png',\r\n    maxZoom: 20,\r\n    crossOrigin: 'anonymous',\r\n  }),\r\n});\r\n\r\n// 수정 스타일 (전역변수 설정이 안되서 못옮김)\r\nlet modifyStyle = new ol.style.Style({\r\n  image: new ol.style.Circle({\r\n    radius: 5,\r\n    stroke: new ol.style.Stroke({\r\n      color: 'rgba(0, 0, 0, 0.7)',\r\n    }),\r\n    fill: new ol.style.Fill({\r\n      color: 'rgba(0, 0, 0, 0.4)',\r\n    }),\r\n  }),\r\n  text: new ol.style.Text({\r\n    text: 'Drag to modify',\r\n    font: '12px Calibri,sans-serif',\r\n    fill: new ol.style.Fill({\r\n      color: 'rgba(255, 255, 255, 1)',\r\n    }),\r\n    backgroundFill: new ol.style.Fill({\r\n      color: 'rgba(0, 0, 0, 0.7)',\r\n    }),\r\n    padding: [2, 2, 2, 2],\r\n    textAlign: 'left',\r\n    offsetX: 15,\r\n  }),\r\n});\r\n// 수정 스타일 (end)\r\n\r\n//////////////////////////////////////////\r\nlet source = new ol.source.Vector();\r\n\r\nlet modify = new ol.interaction.Modify({\r\n  source: source,\r\n  style: modifyStyle\r\n});\r\n\r\nlet vector = new ol.layer.Vector({\r\n  source: source,\r\n  style: function (feature) {\r\n    return styleFunction(feature, showSegments.checked);\r\n  },\r\n});\r\n// popup 속성 생성\r\nconst container = document.getElementById('popup');\r\nconst content = document.getElementById('popup-content');\r\nconst closer = document.getElementById('popup-closer');\r\n\r\nlet overlay = new ol.Overlay({\r\n  element: container,\r\n  autoPan: {\r\n    animation: {\r\n      duration: 250,\r\n    },\r\n  },\r\n});\r\n///////////////////////////////////////////\r\n\r\nconst extent = ol.proj.get('EPSG:3857').getExtent().slice();\r\nextent[0] += extent[0];\r\nextent[2] += extent[2];\r\nlet mapView = new ol.View({\r\n  projection: 'EPSG:3857',\r\n  center: new ol.geom.Point([126.97659953, 37.579220423])\r\n    .transform('EPSG:4326', 'EPSG:3857')\r\n    .getCoordinates(),\r\n  zoom: 5,\r\n  extent,\r\n})\r\n// map 불러오기\r\nlet map = new ol.Map({\r\n  layers: [imagery, vector],\r\n  overlays: [overlay],\r\n  target: 'map',\r\n  view: mapView,\r\n  controls: []\r\n});\r\n// const moveButton = document.getElementById('epsg_move');\r\n/////////////////\r\n// function flyTo(location, done) {\r\n//   const duration = 2000;\r\n//   const zoom = mapView.getZoom();\r\n//   let parts = 2;\r\n//   let called = false;\r\n//   function callback(complete) {\r\n//     --parts;\r\n//     if (called) {\r\n//       return;\r\n//     }\r\n//     if (parts === 0 || !complete) {\r\n//       called = true;\r\n//       done(complete);\r\n//     }\r\n//   }\r\n//   mapView.animate(\r\n//     {\r\n//       center: location,\r\n//       duration: duration,\r\n//     },\r\n//     callback\r\n//   );\r\n//   view.animate(\r\n//     {\r\n//       zoom: zoom - 1,\r\n//       duration: duration / 2,\r\n//     },\r\n//     {\r\n//       zoom: zoom,\r\n//       duration: duration / 2,\r\n//     },\r\n//     callback\r\n//   );\r\n// }\r\n/////////////\r\nfunction move() {\r\n  var longitudeYY = document.getElementById(\"longitudeMove\");\r\n  var latitudeYY = document.getElementById(\"latitudeMove\");\r\n  var longitudeYY_Move = Number(longitudeYY.value);\r\n  var latitudeYY_Move = Number(latitudeYY.value);\r\n  \r\n  map.getView().setCenter(\r\n    new ol.geom.Point([longitudeYY_Move, latitudeYY_Move]).transform('EPSG:4326', 'EPSG:3857').getCoordinates()\r\n  );\r\n  map.getView().setZoom(parseInt(5));\r\n}\r\n\r\n// WMS 불러오기\r\nlet LAYER_WMS = new ol.layer.Tile({\r\n  title: \"LAYER_WMS\",\r\n        \tsource: new ol.source.TileWMS({\r\n\t            url: 'https://d2map.com/geoserver/D2Map/wms',\r\n\t            params: {\r\n              \t  LAYERS: 'afa001,sudo',\r\n\t                VERSION: '1.1.0',\r\n              \t  SRS: 'EPSG:4326',\r\n\t                TRANSPARENT: true,\r\n\t            },\r\n            \tserverType: 'geoserver',\r\n            \tcrossOrigin: 'Anonymous', //미 선언시 Export(png, jpg) 오류 발생\r\n\t        }),\r\n          opacity: 1.0,\r\n          visible:false\r\n\t });\r\nmap.addLayer(LAYER_WMS);\r\n\r\n// OSM 불러오기\r\nlet LAYER_OSM = new ol.layer.Tile({\r\n  title: \"LAYER_OSM\",\r\n  source: new ol.source.OSM(),\r\n  visible:false\r\n});\r\nmap.addLayer(LAYER_OSM);\r\n\r\n// title로 checkbox 분류\r\nfunction toggleLayer(eve) {\r\n    var lyrname = eve.target.value;\r\n    var checkedStatus = eve.target.checked;\r\n    var lyrList = map.getLayers();\r\n\r\n    lyrList.forEach(function (element) {\r\n        if (lyrname == element.get('title')) {\r\n            element.setVisible(checkedStatus);\r\n        }\r\n    });\r\n}\r\n\r\n// 마우스에 따라 경도 위도 표시\r\nvar mousePosition = new ol.control.MousePosition({\r\n  bar: true,\r\n  text: true,\r\n    className: 'mousePosition',\r\n    projection: 'EPSG:4326',\r\n    coordinateFormat: function (coordinate) {\r\n        return ol.coordinate.format(coordinate, '{y} N, {x} E', 3);\r\n    }\r\n});\r\n\r\nmap.addControl(mousePosition);\r\n\r\n// zoom에 따라 scale 값 확인\r\nvar scaleControl = new ol.control.ScaleLine({\r\n  bar: true,\r\n  text: true\r\n})\r\n\r\nmap.addControl(scaleControl);\r\n\r\n// spinner\r\nmap.on('loadstart', function () {\r\n  map.getTargetElement().classList.add('spinner');\r\n});\r\nmap.on('loadend', function () {\r\n  map.getTargetElement().classList.remove('spinner');\r\n});\r\n\r\n// test\r\n\r\nconst queryInput = document.getElementById('epsg-query');\r\nconst searchButton = document.getElementById('epsg-search');\r\nconst resultSpan = document.getElementById('epsg-result');\r\n\r\nfunction setProjection(code, name, proj4def, bbox) {\r\n  if (code === null || name === null || proj4def === null || bbox === null) {\r\n    resultSpan.innerHTML = 'Nothing usable found, using EPSG:3857...';\r\n    map.setView(\r\n      new ol.View({\r\n        projection: 'EPSG:3857',\r\n        center: [0, 0],\r\n        zoom: 1,\r\n      })\r\n    );\r\n    return;\r\n  }\r\n\r\n  resultSpan.innerHTML = '(' + code + ') ' + name;\r\n\r\n  const newProjCode = 'EPSG:' + code;\r\n\r\n  // proj4.defs(newProjCode, proj4def);\r\n  // ol.proj.proj4.register(proj4);\r\n  const newProj = ol.proj.get(newProjCode);\r\n  const fromLonLat = ol.proj.getTransform('EPSG:4326', newProj);\r\n\r\n  let worldExtent = [bbox[1], bbox[2], bbox[3], bbox[0]];\r\n  newProj.setWorldExtent(worldExtent);\r\n\r\n  // approximate calculation of projection extent,\r\n  // checking if the world extent crosses the dateline\r\n  if (bbox[1] > bbox[3]) {\r\n    worldExtent = [bbox[1], bbox[2], bbox[3] + 360, bbox[0]];\r\n  }\r\n  const extent = ol.extent.applyTransform(worldExtent, fromLonLat, undefined, 8);\r\n  newProj.setExtent(extent);\r\n  const newView = new ol.View({\r\n    projection: newProj,\r\n  });\r\n  map.setView(newView);\r\n  newView.fit(extent);\r\n}\r\n\r\nfunction search(query) {\r\n  resultSpan.innerHTML = 'Searching ...';\r\n  fetch('https://epsg.io/?format=json&q=' + query)\r\n    .then(function (response) {\r\n      return response.json();\r\n    })\r\n    .then(function (json) {\r\n      const results = json['results'];\r\n      if (results && results.length > 0) {\r\n        for (let i = 0, ii = results.length; i < ii; i++) {\r\n          const result = results[i];\r\n          if (result) {\r\n            const code = result['code'];\r\n            const name = result['name'];\r\n            const proj4def = result['proj4'];\r\n            const bbox = result['bbox'];\r\n            if (\r\n              code &&\r\n              code.length > 0 &&\r\n              proj4def &&\r\n              proj4def.length > 0 &&\r\n              bbox &&\r\n              bbox.length == 4\r\n            ) {\r\n              setProjection(code, name, proj4def, bbox);\r\n              return;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      setProjection(null, null, null, null);\r\n    });\r\n}\r\n\r\n/**\r\n * Handle click event.\r\n * @param {Event} event The event.\r\n */\r\nsearchButton.onclick = function (event) {\r\n  search(queryInput.value);\r\n  event.preventDefault();\r\n};\r\n"],"names":[],"version":3,"file":"index.de158e3a.js.map","sourceRoot":"/__parcel_source_root/"}